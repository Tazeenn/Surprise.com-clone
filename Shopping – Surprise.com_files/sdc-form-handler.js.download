class SDC_Form_Handler{FILTER={text:/[A-Za-z\s]/,number:/[0-9]/,url:/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&â€™\(\)\*\+,;=.]+$/i,email:/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$/};KEY={Escape:"Escape",ArrowLeft:"ArrowLeft",ArrowRight:"ArrowRight",ArrowUp:"ArrowUp",ArrowDown:"ArrowDown",Enter:"Enter",Delete:"Delete",Backspace:"Backspace",Tab:"Tab",Space:"Space"};IS_VALID=!1;constructor(t,e){this.form=t,this.callbackFunction=e,(this.form||"object"==typeof this.form)&&this.init()}init(){this.handleKeyDown(),this.handleInput(),this.submit()}get fields(){return this.form.elements}get radioButtonsName(){let t=[];return Array.prototype.filter.call(this.fields,(t=>"radio"===t.type)).filter((e=>t.push(e.name))),t.filter(this.unique)}unique(t,e,i){return i.indexOf(t)===e}regExpValidation(){Array.prototype.filter.call(this.fields,(t=>{if(""===t.value)return;let e=t.dataset.filter,i=this.FILTER[e];i&&!1===i.test(t.value)&&(this.highlight(t,!1,"invalid"),this.IS_VALID=!1)}))}handleKeyDown(){this.form.addEventListener("keydown",(t=>{let e=t.target.dataset.filter,i=this.FILTER[e];if("text"!==e)return!1;!i||i.test(t.key)||[this.KEY.Backspace,this.KEY.Delete,this.KEY.ArrowLeft,this.KEY.ArrowRight].includes(t.code)||t.preventDefault()}))}handleInput(){Array.prototype.map.call(this.fields,(t=>{t.addEventListener("input",(()=>this.highlight(t,!0,["empty","invalid","notvalid"])))}))}highlight(t,e,i="empty"){e?t.closest(".form-item").classList.remove(...i):t.closest(".form-item").classList.add(i)}validataRadio(){let t=this.fields[this.radioButtonsName];!t||t&&""!==t.value||(this.highlight(t[0],!1),this.IS_VALID=!1)}requireInputs(){let t=this.fields,e=Array.prototype.filter.call(t,(t=>""===t.value));e.map((t=>this.highlight(t,!1))),e.length>0?this.IS_VALID=!1:this.IS_VALID=!0}sendFormData(){let t=new FormData(this.form);t.append("action","sdc_form_handler"),t.append("form_id",this.form.id);let e=new URLSearchParams(t).toString();postData(surprise_ajax_params.ajaxurl,e).then((t=>t))}submit(){this.form.addEventListener("submit",(t=>{t.preventDefault(),this.requireInputs(),this.validataRadio(),this.regExpValidation(),this.IS_VALID?this.form.classList.remove("has-errors"):this.form.classList.add("has-errors"),setTimeout((()=>{this.form.classList.remove("has-errors")}),1200),this.IS_VALID&&(this.callbackFunction&&"function"==typeof this.callbackFunction&&this.callbackFunction(),this.sendFormData(),"sdc_form_signup"!==this.form.name&&this.form.reset(),this.form.classList.add("sent"))}))}}
//# sourceMappingURL=sdc-form-handler.js.map
